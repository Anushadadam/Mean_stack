<div class="container">
    <h2>{{ isAddMode ? 'Add Person' : 'Edit Person' }}</h2>

    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

    <form [formGroup]="personForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label>First Name</label>
            <input formControlName="firstName" class="form-control"
                [ngClass]="{'is-invalid': submitted && f.firstName.errors}" />
            <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                <div *ngIf="f.firstName.errors.required">Required</div>
                <div *ngIf="f.firstName.errors.maxlength">Max 50 chars</div>
            </div>
        </div>

        <div class="form-group">
            <label>Last Name</label>
            <input formControlName="lastName" class="form-control"
                [ngClass]="{'is-invalid': submitted && f.lastName.errors}" />
            <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                <div *ngIf="f.lastName.errors.required">Required</div>
                <div *ngIf="f.lastName.errors.maxlength">Max 50 chars</div>
            </div>
        </div>

        <div class="form-group">
            <label>Email</label>
            <input formControlName="email" class="form-control"
                [ngClass]="{'is-invalid': submitted && f.email.errors}" />
            <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                <div *ngIf="f.email.errors.required">Required</div>
                <div *ngIf="f.email.errors.email">Invalid email</div>
            </div>
        </div>

        <div class="form-group">
            <label>Age</label>
            <input type="number" formControlName="age" class="form-control"
                [ngClass]="{'is-invalid': submitted && f.age.errors}" />
            <div *ngIf="submitted && f.age.errors" class="invalid-feedback">
                <div *ngIf="f.age.errors.required">Required</div>
                <div *ngIf="f.age.errors.min">Min is 1</div>
                <div *ngIf="f.age.errors.max">Max is 120</div>
            </div>
        </div>

        <button [disabled]="loading" class="btn btn-primary">
            <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
            {{ isAddMode ? 'Create' : 'Update' }}
        </button>
        <button type="button" class="btn btn-secondary ml-2" (click)="cancelForm()">Cancel</button>
    </form>
</div>